#!/bin/bash

# ====================================
# React 빌드 결과 전송 스크립트
# ====================================

set -e  # 오류 발생 시 스크립트 종료

# -------------------------------
# 1. 프로젝트 루트로 이동
# -------------------------------
PROJECT_ROOT="$(dirname "$0")"
cd "$PROJECT_ROOT"

# -------------------------------
# 2. 빌드 결과 확인
# -------------------------------
if [ ! -d "build" ]; then
  echo "❌ build 폴더가 없습니다. 먼저 빌드하세요."
  exit 1
fi

# -------------------------------
# 3. 원격 서버 정보
# -------------------------------
REMOTE_USER="azureuser"       # 서버 사용자
REMOTE_HOST="dh-lab.koreacentral.cloudapp.azure.com"    # 서버 주소
REMOTE_PATH="/var/www/html"  # 배포 경로

# -------------------------------
# 4. SCP로 빌드 결과 전송
# -------------------------------
echo "🚀 원격 서버로 전송 중..."
scp -r build/* ${REMOTE_USER}@${REMOTE_HOST}:${REMOTE_PATH}

echo "🎉 전송 완료!"
